<!DOCTYPE html>
<html>
    <head>
        <title>Util</title>
        <script type="module">

import { test } from "./test.js";
import { imagePromise, mod, range } from "../lib/util.js";

test("imagePromise", async t => {
    const image = await imagePromise("../examples/tomato/img/tomato01.png");
    t.equal(image.naturalWidth, 480, "the image was properly loaded");
    try {
        await imagePromise("missing.png");
        t.fail("missing image should have been caught");
    } catch (e) {
        t.instanceof(e, Error, "missing image was caught");
    }
});

test("mod", t=> {
    t.equal(mod(3, 7), 3, "3 mod 7 = 3");
    t.equal(mod(13, 7), 6, "13 mod 7 = 6");
    t.equal(mod(-3, 7), 4, "-3 mod 7 = 4");
    t.equal(mod(-7, 7), 0, "-7 mod 7 = 0");
});

test("range", t => {
    t.equal(range(1, 10), [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], "default step (1)");
    t.equal(range(1, 10, 2), [1, 3, 5, 7, 9], "integral step (2)");
    t.equal(range(1, 10, 2.5), [1, 3.5, 6, 8.5], "non-integral step (2.5)");
    t.equal(range(1, 10, 0), [], "zero step");
    t.equal(range(10, 1, -1), [10, 9, 8, 7, 6, 5, 4, 3, 2, 1], "negative step (-1)");
    t.equal(range(10, 1, -2), [10, 8, 6, 4, 2], "negative step (-2)");
    t.equal(range(10, 1, -2.5), [10, 7.5, 5, 2.5], "negative step (-2)");
    t.equal(range(5, 5), [5], "single element");
    t.equal(range(10, 1), [], "no backward range without negative step");
});

        </script>
    </head>
    <body>
    </body>
</html>
